<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for spiderette/Card.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">All files</a> / <a href="index.html">spiderette</a> Card.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>83/83</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>67/67</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>10/10</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>79/79</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">5408x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">2046x</span>
<span class="cline-any cline-yes">2046x</span>
<span class="cline-any cline-yes">2046x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2046x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2046x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">904x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1142x</span>
<span class="cline-any cline-yes">151x</span>
<span class="cline-any cline-yes">991x</span>
<span class="cline-any cline-yes">81x</span>
<span class="cline-any cline-yes">910x</span>
<span class="cline-any cline-yes">56x</span>
<span class="cline-any cline-yes">854x</span>
<span class="cline-any cline-yes">82x</span>
<span class="cline-any cline-yes">772x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1141x</span>
<span class="cline-any cline-yes">308x</span>
<span class="cline-any cline-yes">833x</span>
<span class="cline-any cline-yes">266x</span>
<span class="cline-any cline-yes">567x</span>
<span class="cline-any cline-yes">255x</span>
<span class="cline-any cline-yes">312x</span>
<span class="cline-any cline-yes">308x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1137x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">29520x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">857x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">855x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">855x</span>
<span class="cline-any cline-yes">70x</span>
<span class="cline-any cline-yes">785x</span>
<span class="cline-any cline-yes">65x</span>
<span class="cline-any cline-yes">720x</span>
<span class="cline-any cline-yes">64x</span>
<span class="cline-any cline-yes">656x</span>
<span class="cline-any cline-yes">67x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">589x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">38217x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">38215x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">857x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">855x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">855x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">214x</span>
<span class="cline-any cline-yes">641x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">213x</span>
<span class="cline-any cline-yes">428x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">213x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">215x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">22093x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">22091x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">22091x</span>
<span class="cline-any cline-yes">9082x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">13009x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">40251x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">1244x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">890x</span>
<span class="cline-any cline-yes">37x</span>
<span class="cline-any cline-yes">853x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">852x</span>
<span class="cline-any cline-yes">233x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">619x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * this is an object that knows how to read and work with card data
 * cards are 8 bit binary integers ranging from 8 to 111 (in decimal)
 * in the binary value the first five bits are the value of the card
 * (vals: 1 to 13) the next two are the suit (vals: 0 to 3) the last
 * bit is the faceup state (vals: 0 or 1).
 *
 * If a card's value is 0 it's unknown and face down
 * If a card's value is 1 it's unkown and face up
 *
 * Unknown cards are allowed when parsing them from a string
 *
 * @type {Object}
 */
Card = {};
&nbsp;
Card.faceDown = 0x0; // 0000
Card.faceUp = 0x1; // 0001
Card.suitFilter = 3; // 0011
&nbsp;
/**
 * Creates a new card
 * @param {Number} value The value of the card from 1(Ace) to 13(King)
 * @param {Number} suit The value of the suit. 1=Clubs, 2=Diamonds, 3=Hearts, 4=Spades
 * @param {Boolean} faceUp Indicates if the card is face up or not.
 * @returns {Number} Returns an integer representation of this card.  Can be processed using other functions on Card.
 */
Card.newCard = function(value, suit, faceUp) {
  return (value &lt;&lt; 3) | (suit &lt;&lt; 1) | faceUp;
};
&nbsp;
/**
 * Takes the string representation of a card and turns it into an integer representation
 * @param string A string representation (AH, 8S, KD, etc) of a card
 */
Card.fromString = function(string) {
  string = string.trim();
  var value = string.substr(1, string.length - 3).trim();
  var suit = string.substr(string.length - 2, 1);
&nbsp;
  var faceUp = string[0] === '[';
&nbsp;
  // are the value and suit unknown?
  if ((value === '?' || value === '??') &amp;&amp; suit === '?') {
    // reutrn 1 or 0 depending on if the card is face up
    return faceUp ? 1 : 0;
  }
&nbsp;
  // figure out the numeric value if we have a string value.
  if (value === 'A') {
    value = 1;
  } else if (value === 'J') {
    value = 11;
  } else if (value === 'Q') {
    value = 12;
  } else if (value === 'K') {
    value = 13;
  } else if (!(value &gt;= 2 || value &lt;= 10)) {
    throw new Error('Invalid Value ' + value);
  }
&nbsp;
  // figure out the suit
  if (suit === 'C') {
    suit = 0;
  } else if (suit === 'D') {
    suit = 1;
  } else if (suit === 'H') {
    suit = 2;
  } else if (suit === 'S') {
    suit = 3;
  } else {
    throw new Error('Invalid Suit ' + suit);
  }
&nbsp;
  return Card.newCard(parseInt(value, 10), parseInt(suit, 10), faceUp);
};
&nbsp;
/**
 * Returns the numeric value of the card provided
 * @param {int} card A card as an integer
 * @returns {int} The numeric value of the provided card (1 to 13)
 */
Card.numericValue = function(card) {
  return card &gt;&gt; 3;
};
&nbsp;
/**
 * Returns the string value of the card provided (a, 2-10, j, q, k)
 * @param {int} card A card as an integer
 * @returns {String} The string representation of the card
 */
Card.value = function(card) {
  if (card === 0 || card === 1) throw new Error('Unknown Value');
&nbsp;
  var value = Card.numericValue(card);
&nbsp;
  // replace the numeric value with an alpha value where needed
  if (value === 1) {
    return 'A';
  } else if (value === 11) {
    return 'J';
  } else if (value === 12) {
    return 'Q';
  } else if (value === 13) {
    return 'K';
  } else {
    return value;
  }
};
&nbsp;
/**
 * returns the numeric value of the suit
 * @param card The card to get the numeric suit from
 * @return {int}
 */
Card.numericSuit = function(card) {
  if (card === 0 || card === 1) throw new Error('Unknown Suit');
&nbsp;
  return (card &gt;&gt; 1) &amp; Card.suitFilter;
};
&nbsp;
/**
 * Returns the suit of the card provided
 * @param {int} card
 * @returns {string} The suit of the card in unicode
 */
Card.suit = function(card) {
  if (card === 0 || card === 1) throw new Error('Unknown Suit');
&nbsp;
  var suit = Card.numericSuit(card);
&nbsp;
  if (suit === 0) {
    //return "♣";
    return 'C';
  } else if (suit === 1) {
    //return "♢";
    return 'D';
  } else if (suit === 2) {
    //return "♡";
    return 'H';
  } else {
    // 3
    //return "♠";
    return 'S';
  }
};
&nbsp;
/**
 * Returns the color of the card provided
 * @param {int} card
 * @returns {int} The color of the card (0=black or 1=red)
 */
//todo: write a test for this
Card.color = function(card) {
  if (card === 0 || card === 1) throw new Error('Unknown Suit');
&nbsp;
  var suit = Card.numericSuit(card);
&nbsp;
  if (suit === 0 || suit === 3) {
    return 0;
  } else {
    // if(suit === 1 || suit === 2)
    return 1;
  }
};
&nbsp;
/**
 * Indicates if the card is faceup
 * @param {int} card The card to check if is face up
 * @return {Boolean} Indicates if the card is face up or not
 */
Card.isFaceUp = function(card) {
  return card &amp; Card.faceUp;
};
&nbsp;
/**
 * Flips a card over such that a faceup card is now face down and vice versa
 * @param {int} card The card to flip
 * @returns {int} The flipped card
 */
Card.flip = function(card) {
  return card ^ Card.faceUp;
};
&nbsp;
/**
 * This is a test
 * @param card The card to convert to a string
 */
Card.asString = function(card) {
  if (card === 0) {
    return '(???)';
  } else if (card === 1) {
    return '[???]';
  }
&nbsp;
  if (Card.isFaceUp(card)) {
    return `[${Card.value(card).toString().padStart(2, ' ')}${Card.suit(card)}]`;
  } else {
    return `(${Card.value(card).toString().padStart(2, ' ')}${Card.suit(card)})`;
  }
&nbsp;
  //return Card.isFaceUp(card) ? Card.value(card) + Card.suit(card) : "XX";
};
&nbsp;
module.exports = Card;
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Sun Sep 03 2017 11:28:08 GMT-0400 (EDT)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
