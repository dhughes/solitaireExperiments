<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for spiderette/Klondike.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">All files</a> / <a href="index.html">spiderette</a> Klondike.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">99.47% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>186/187</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">98% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>49/50</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">97.73% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>43/44</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>173/173</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445</td><td class="line-coverage quiet"><span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23108x</span>
<span class="cline-any cline-yes">109x</span>
<span class="cline-any cline-yes">109x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">436x</span>
<span class="cline-any cline-yes">763x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">109x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">109x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">73x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">73x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">73x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">73x</span>
<span class="cline-any cline-yes">73x</span>
<span class="cline-any cline-yes">511x</span>
<span class="cline-any cline-yes">2044x</span>
<span class="cline-any cline-yes">2044x</span>
<span class="cline-any cline-yes">2044x</span>
<span class="cline-any cline-yes">511x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">73x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">73x</span>
<span class="cline-any cline-yes">73x</span>
<span class="cline-any cline-yes">143x</span>
<span class="cline-any cline-yes">143x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">73x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">73x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-yes">249x</span>
<span class="cline-any cline-yes">249x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-yes">300x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">75x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">100x</span>
<span class="cline-any cline-yes">100x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">100x</span>
<span class="cline-any cline-yes">100x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">300x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">344x</span>
<span class="cline-any cline-yes">344x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">344x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">300x</span>
<span class="cline-any cline-yes">300x</span>
<span class="cline-any cline-yes">86x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">484x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">484x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">484x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">484x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">484x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">484x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">487x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">487x</span>
<span class="cline-any cline-yes">487x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">487x</span>
<span class="cline-any cline-yes">1948x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">487x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3409x</span>
<span class="cline-any cline-yes">53218x</span>
<span class="cline-any cline-yes">53218x</span>
<span class="cline-any cline-yes">11535x</span>
<span class="cline-any cline-yes">8126x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3409x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">487x</span>
<span class="cline-any cline-yes">414x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">487x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">485x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">120x</span>
<span class="cline-any cline-yes">120x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">65x</span>
<span class="cline-any cline-yes">65x</span>
<span class="cline-any cline-yes">65x</span>
<span class="cline-any cline-yes">65x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">65x</span>
<span class="cline-any cline-yes">70x</span>
<span class="cline-any cline-yes">75x</span>
<span class="cline-any cline-yes">80x</span>
<span class="cline-any cline-yes">85x</span>
<span class="cline-any cline-yes">90x</span>
<span class="cline-any cline-yes">95x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">85x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">596x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">596x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">375x</span>
<span class="cline-any cline-yes">750x</span>
<span class="cline-any cline-yes">549x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">201x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-yes">221x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">483x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">483x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">483x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">488x</span>
<span class="cline-any cline-yes">488x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">488x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">488x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1318x</span>
<span class="cline-any cline-yes">804x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1318x</span>
<span class="cline-any cline-yes">358x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">488x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">103032x</span>
<span class="cline-any cline-yes">25277x</span>
<span class="cline-any cline-yes">25277x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-yes">1117x</span>
<span class="cline-any cline-yes">1117x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1117x</span>
<span class="cline-any cline-yes">2811x</span>
<span class="cline-any cline-yes">1117x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2811x</span>
<span class="cline-any cline-yes">1117x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2811x</span>
<span class="cline-any cline-yes">1117x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1117x</span>
<span class="cline-any cline-yes">1117x</span>
<span class="cline-any cline-yes">1117x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-yes">1944x</span>
<span class="cline-any cline-yes">1117x</span>
<span class="cline-any cline-yes">1117x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">486x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">require('./Util');
const Deck = require('./Deck');
const Card = require('./Card');
&nbsp;
/**
 * Klondike is an object that can create and manipulate klondike game states.
 * @type {Object}
 */
Klondike = {};
&nbsp;
Klondike.automaticallyCreateStringRepresentation = false;
&nbsp;
/**
 * Creates a new, virginal, gameState
 * @return {Object} The new gameState
 */
Klondike.newGameState = function(drawCount) {
  // create the game state
  let data = Uint8Array.ofSize(212).map(i =&gt; -1);
  let piles = Klondike.getPiles(data);
  let gameState = {
    data: data, // 13+13+13+13 + 13+14+15+16+17+18+19 + 24 + 24
    piles: piles,
    pileLengths: {
      foundations: Uint8Array.ofSize(4).map(i =&gt; -1),
      tableaux: Uint8Array.ofSize(7).map(i =&gt; -1),
      waste: 0,
      stock: 0
    },
    drawCount: drawCount,
    stateScore: 0,
    stringRepresentation: '',
    foundationSuits: undefined,
    lowestFoundationValue: 0,
    hash: 0,
    won: false
  };
&nbsp;
  Klondike.updatePileLengths(gameState);
&nbsp;
  return gameState;
};
&nbsp;
/**
 * Creates and deals a new game
 * @param drawCount
 */
Klondike.newGame = function(drawCount) {
  // create and shuffle a new deck
  let cards = Deck.shuffle(Deck.newDeck());
&nbsp;
  // create the game state
  let gameState = Klondike.newGameState(drawCount);
&nbsp;
  // figure out what piles we've got
  let piles = gameState.piles;
&nbsp;
  // deal the game out
&nbsp;
  // populate the Tableau columns
  let i = -1;
  for (let r = 0; r &lt; 7; r++) {
    for (let t = 0 + r; t &lt; 7; t++) {
      i++;
      piles.tableaux[t][r] = cards[i];
      if (r === t) {
        piles.tableaux[t][r] = Card.flip(piles.tableaux[t][r]);
      }
    }
  }
&nbsp;
  //console.log(Card.asString(cards[i]));
&nbsp;
  // stock the stock
  piles.stock.set(cards.subarray(28, 52 - drawCount));
&nbsp;
  // todo: I may want to factor this out into its own function so I can reuse the code for drawing
  // set the waste
  i = -1;
  for (let c = cards.length - 1; c &gt; cards.length - 1 - drawCount; c--) {
    i++;
    piles.waste[i] = Card.flip(cards[c]);
  }
&nbsp;
  // set the calculated values in the gameState
  Klondike.updateState(gameState);
&nbsp;
  // return the gameState (this can be worked with by any function on this Klondike object.
  return gameState;
};
&nbsp;
/**
 * Makes a move as specified by the move object.  If this move wins the game the won attribute is set to true!
 * @param {Object} move The move to make.
 */
Klondike.doMove = function(gameState, move) {
  // default the count, if need be
  move.count = move.count || 1;
&nbsp;
  // get the piles from the gameState
  let piles = gameState.piles;
  let pileLengths = gameState.pileLengths;
&nbsp;
  let from = piles[move.from];
  let fromLen = pileLengths[move.from];
&nbsp;
  if (move.fromIndex !== undefined) {
    from = from[move.fromIndex];
    fromLen = fromLen[move.fromIndex];
  }
&nbsp;
  let to = piles[move.to];
  if (move.toIndex !== undefined) {
    to = to[move.toIndex];
  }
&nbsp;
  // figure out the index of what we're moving
  let start = fromLen - move.count;
  let end = fromLen;
  let i, card;
&nbsp;
  // if we're moving to or from the stock we need to loop backwards, otherwise we loop forward and move the cards to the to pile
  if (move.from === 'stock' || move.to === 'stock') {
    // loop backwards
    for (i = end - 1; i &gt;= start &amp;&amp; i !== 255; i--) {
      // remove the card
      card = from[i];
      from[i] = 255;
      // flip this card to the target
      <span class="missing-if-branch" title="else path not taken" >E</span>if (card !== 255) {
        to.push(Card.flip(card));
        //console.log(i + ": " + card + "/" + Card.asString(card !== 255 &amp;&amp; Card.isFaceUp(card) ? card : Card.flip(card)));
      }
    }
  } else {
    // loop forwards
    for (i = start; i &lt; end; i++) {
      // remove the card
      card = from[i];
      from[i] = 255;
      // add this card to the target
      to.push(card);
      //console.log(i + ": " + Card.asString(card));
    }
&nbsp;
    // make sure the exposed card is face up
    card = from[fromLen - move.count - 1];
    if (card !== 255 &amp;&amp; !Card.isFaceUp(card)) {
      from[fromLen - move.count - 1] = Card.flip(card);
    }
  }
&nbsp;
  // update the game's state
  Klondike.updateState(gameState, [{ pile: move.from, index: move.fromIndex }, { pile: move.to, index: move.toIndex }]);
&nbsp;
  //console.log(gameState.stringRepresentation.indent(1));
};
&nbsp;
/**
 * This is a convenience function to refesh all calculated values in a gamestate
 * @param gameState
 */
Klondike.updateState = function(gameState, specificPiles) {
  // update the pile lengths
  Klondike.updatePileLengths(gameState, specificPiles);
&nbsp;
  // update the score
  Klondike.updateScore(gameState);
&nbsp;
  // generate the string representation of this state
  if (Klondike.automaticallyCreateStringRepresentation) {
    Klondike.setStringRepresentation(gameState);
  }
&nbsp;
  // populate the set of foundation suits
  Klondike.setFoundationSuits(gameState);
&nbsp;
  // find the lowest foundation value
  Klondike.setLowestFoundationValue(gameState);
&nbsp;
  // set the game's hash
  Klondike.setHash(gameState);
};
&nbsp;
/**
 * Updates the score in the gameState
 * @param {Object} gameState The gameState to update.
 */
Klondike.updateScore = function(gameState) {
  gameState.stateScore = 0;
&nbsp;
  // get the piles
  let piles = gameState.piles;
  let pileLengths = gameState.pileLengths;
&nbsp;
  // add the foundations into the score
  for (let f = 0; f &lt; piles.foundations.length; f++) {
    gameState.stateScore += pileLengths.foundations[f] * 2;
  }
&nbsp;
  // add the tableaux into the score
  for (t = 0; t &lt; piles.tableaux.length; t++) {
    // loop backwards over this foundation until we find a card that's not face up
    for (let c = piles.tableaux[t].length - 1; c !== 255; c--) {
      let card = piles.tableaux[t][c];
      if (card !== 255) {
        if (Card.isFaceUp(card)) {
          gameState.stateScore++;
        } else {
          break;
        }
      }
    }
  }
&nbsp;
  // add the the waste
  if (pileLengths.waste) {
    gameState.stateScore++;
  }
&nbsp;
  // check if we won!
  if (gameState.stateScore === 104) {
    gameState.won = true;
  } else {
    gameState.won = false;
  }
};
&nbsp;
/**
 * Creates the string representation of a game state
 * @param {Object} gameState The gameState to update
 */
Klondike.setStringRepresentation = function(gameState) {
  let text = '';
  const piles = gameState.piles;
  const pileLengths = gameState.pileLengths;
  let i;
&nbsp;
  gameState.stringRepresentation = `
    ST: ${Array.from(piles.stock.filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
    WA: ${Array.from(piles.waste.filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
&nbsp;
    F0: ${Array.from(piles.foundations[0].filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
    F1: ${Array.from(piles.foundations[1].filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
    F2: ${Array.from(piles.foundations[2].filter(card =&gt; card !== 255)).map(<span class="fstat-no" title="function not covered" >ca</span>rd =&gt; <span class="cstat-no" title="statement not covered" >Card.asString(card))</span>.join(',')}
    F3: ${Array.from(piles.foundations[3].filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
&nbsp;
    T0: ${Array.from(piles.tableaux[0].filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
    T1: ${Array.from(piles.tableaux[1].filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
    T2: ${Array.from(piles.tableaux[2].filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
    T3: ${Array.from(piles.tableaux[3].filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
    T4: ${Array.from(piles.tableaux[4].filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
    T5: ${Array.from(piles.tableaux[5].filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
    T6: ${Array.from(piles.tableaux[6].filter(card =&gt; card !== 255)).map(card =&gt; Card.asString(card)).join(',')}
  `
    .split('\n')
    .map(line =&gt; line.trim())
    .join('\n');
};
&nbsp;
/**
 * Updates the lengths of piles in the provided gameState
 * @param {Object} gameState The gameSthat containing the piles
 * @param {Array} specificPiles This is an array of specific piles to update. Each element is an object consisting of {pile, index}.
 */
Klondike.updatePileLengths = function(gameState, specificPiles) {
  let piles = gameState.piles;
&nbsp;
  if (specificPiles !== undefined) {
    // only update specific piles
    for (let i = 0; i &lt; specificPiles.length; i++) {
      if (specificPiles[i].index !== undefined) {
        gameState.pileLengths[specificPiles[i].pile][specificPiles[i].index] = gameState.piles[specificPiles[i].pile][
          specificPiles[i].index
        ].len();
      } else {
        gameState.pileLengths[specificPiles[i].pile] = gameState.piles[specificPiles[i].pile].len();
      }
    }
  } else {
    // update all piles
    gameState.pileLengths.foundations[0] = piles.foundations[0].len();
    gameState.pileLengths.foundations[1] = piles.foundations[1].len();
    gameState.pileLengths.foundations[2] = piles.foundations[2].len();
    gameState.pileLengths.foundations[3] = piles.foundations[3].len();
&nbsp;
    gameState.pileLengths.tableaux[0] = piles.tableaux[0].len();
    gameState.pileLengths.tableaux[1] = piles.tableaux[1].len();
    gameState.pileLengths.tableaux[2] = piles.tableaux[2].len();
    gameState.pileLengths.tableaux[3] = piles.tableaux[3].len();
    gameState.pileLengths.tableaux[4] = piles.tableaux[4].len();
    gameState.pileLengths.tableaux[5] = piles.tableaux[5].len();
    gameState.pileLengths.tableaux[6] = piles.tableaux[6].len();
&nbsp;
    gameState.pileLengths.waste = piles.waste.len();
    gameState.pileLengths.stock = piles.stock.len();
  }
};
&nbsp;
/**
 * Creates a set of subarrays within the game state.cards element for each pile
 * @param gameState
 * @returns {Object} Object with elements (all arrays): foundation0, foundation1, foundation2, foundation3, tableau0, tableau1, tableau2, tableau3, tableau4, tableau5, tableau6, waste, stock
 */
Klondike.getPiles = function(data) {
  return {
    foundations: Klondike.getFoundations(data),
    tableaux: Klondike.getTableaux(data),
    waste: data.subarray(164, 188), // 24
    stock: data.subarray(188, 212) // 24
  };
};
&nbsp;
/**
 * Gets the foundations from the game
 * @param {Object} gameState The gameState to get the foundations from
 * @return {Array} The array of Foundations
 */
Klondike.getFoundations = function(data) {
  return [
    data.subarray(0, 13), // 13
    data.subarray(13, 26), // 13
    data.subarray(26, 39), // 13
    data.subarray(39, 52) // 13
  ];
};
&nbsp;
/**
 * Gets the tableaux from the game
 * @param  {Object} gameState The gameState to get the tableaux from
 * @return {Array} The array of tableaux
 */
Klondike.getTableaux = function(data) {
  return [
    data.subarray(52, 65), // 13
    data.subarray(65, 79), // 14
    data.subarray(79, 94), // 15
    data.subarray(94, 110), // 16
    data.subarray(110, 127), // 17
    data.subarray(127, 145), // 18
    data.subarray(145, 164) // 19
  ];
};
&nbsp;
/**
 * Sets the lowest foundation value into the gameState.
 * @param {Object} gameState The gameState
 */
Klondike.setLowestFoundationValue = function(gameState) {
  // get the foundations we're working with
  let foundations = gameState.piles.foundations;
  let foundationLengths = gameState.pileLengths.foundations;
&nbsp;
  // record the lowest foundation value
  let lowestFoundationValue = 13;
&nbsp;
  for (let f = 0; f &lt; foundations.length; f++) {
    /*console.log("foundationLengths " + f + ": " + foundationLengths[f]);
		console.log("foundation.len() " + f + ": " + foundations[f].len());
		console.log(foundations[f].asString());*/
    if (foundationLengths[f] &lt; lowestFoundationValue) {
      lowestFoundationValue = foundationLengths[f];
    }
&nbsp;
    // if we find an empty foundation we're done.
    if (!lowestFoundationValue) {
      break;
    }
  }
&nbsp;
  gameState.lowestFoundationValue = lowestFoundationValue;
};
&nbsp;
/**
 * Sets the hash value of a given gameState
 * @param {Object} gameState the gameState
 */
Klondike.setHash = function(gameState) {
  gameState.hash = 0;
&nbsp;
  for (let i = 0; i &lt; gameState.data.length; i++) {
    //console.log(i + " / " + gameState.data[i]);
    if (gameState.data[i] !== 255) {
      let val = ((gameState.data[i] * (i + 1)) &lt;&lt; i) + i;
      gameState.hash += val;
      //console.log("   " + val + " = " + gameState.hash);
&nbsp;
      //console.log("   " + (i &lt;&lt; 8) + gameState.data[i]);
      //gameState.hash += ((i &lt;&lt; 8) + gameState.data[i]);
    }
  }
};
&nbsp;
/**
 * Sets the suits for the foundations based on what's in them already and what we expect.
 * @param {Uint8Array} gameState the gameState
 */
Klondike.setFoundationSuits = function(gameState) {
  // default order is: c d h s
  let suits = Uint8Array.ofSize(4);
  suits[0] = 0;
  suits[1] = 1;
  suits[2] = 2;
  suits[3] = 3;
&nbsp;
  // set the default order
  let order = suits;
&nbsp;
  // get the foundations we're working with
  let foundations = gameState.piles.foundations;
&nbsp;
  let swap = function(arr, val1, val2) {
    let pos1 = -1;
    let pos2 = -1;
&nbsp;
    for (let x = 0; x &lt; arr.length; x++) {
      if (arr[x] === val1) {
        pos1 = x;
      }
      if (arr[x] === val2) {
        pos2 = x;
      }
      if (pos1 !== -1 &amp;&amp; pos2 !== -1) {
        break;
      }
    }
&nbsp;
    let temp = arr[pos1];
    arr[pos1] = arr[pos2];
    arr[pos2] = temp;
  };
&nbsp;
  // loop over the foundations and see what card we actually have in each (if any)
  for (let i = 0; i &lt; foundations.length; i++) {
    if (foundations[i][0] !== 255) {
      let suit = Card.numericSuit(foundations[i][0]);
      swap(order, suit, suits[i]);
    }
  }
&nbsp;
  gameState.foundationSuits = order;
};
&nbsp;
module.exports = Klondike;
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Sun Sep 03 2017 11:17:38 GMT-0400 (EDT)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
